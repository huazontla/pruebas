!function(){function e(e){alert("Un error ocurrio: "+e.code)}function t(e){var t=e.coords.latitude,a=e.coords.longitude;console.log("Tu posicion es: "+t+","+a),$.getJSON(u+"lat="+t+"&lon="+a,n)}function n(e){w.zone=e.name,w.icon=l+e.weather[0].icon+".png",w.temp=e.main.temp-273,15,w.temp_max=e.main.temp_max-273,15,w.temp_min=e.main.temp_min-273,15,w.main=e.weather[0].main,o(w)}function a(e){var t=document.querySelector(e);return document.importNode(t.content,!0)}function o(e){var t=a("#template--city"),n;t.querySelector("[data-city]").innerHTML=e.zone,t.querySelector("[data-icon]").src=e.icon,t.querySelector("[data-temp='max']").innerHTML=e.temp_max.toFixed(1),t.querySelector("[data-temp='min']").innerHTML=e.temp_min.toFixed(1),t.querySelector("[data-temp='current']").innerHTML=e.temp.toFixed(1),$(h).hide(),$(s).append(t)}function i(e){e.preventDefault(),$.getJSON(u+"q="+$(v).val(),r)}function r(e){$(v).val(""),w={},w.zone=e.name,w.icon=l+e.weather[0].icon+".png",w.temp=e.main.temp-273.15,w.temp_max=e.main.temp_max-273.15,w.temp_min=e.main.temp_min-273.15,o(w),_.push(w),localStorage.setItem("cities",JSON.stringify(_))}function c(e){function t(e){e.forEach(function(e){o(e)})}e.preventDefault();var n=JSON.parse(localStorage.getItem("cities"));t(n)}var m="http://api.worldweatheronline.com/free/v2/tz.ashx?format=json&key="+p+"&q=",p="ad4c5f8a265d380d8a41f301f905d",d="c39a7fe0bfa49aa6bd15a940dbc96f0c",u="http://api.openweathermap.org/data/2.5/weather?APPID="+d+"&",l="http://openweathermap.org/img/w/",f=new Date,g=f.toLocaleTimeString(),s=$("body"),h=$(".loader"),v=$("[data-input='cityAdd']"),y=$("[data-button='add']"),S=$("[data-saved-cities]"),_=[],w={};w.zone,w.icon,w.temp,w.temp_max,w.temp_min,w.main,$(y).on("click",i),$(v).on("keypress",function(e){13==e.which&&i(e)}),$(S).on("click",c),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):alert("Por favor actualiza tu navegador")}();